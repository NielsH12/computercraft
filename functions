shell.run("t")

function freeSpaceInInventory()
	for i = 1, 16, 1 do
		if (getItemCount(i) == 0) then
			return true
		end
	end
	return false
end

function emptyChest()
	while (suck()) do end
	if (freeSpaceInInventory()) then
		return true
	else
		return false
	end
end

function getNumberOfItems(item)
	for i = 1, 16, 1 do
		d = getItemDetail(i)
		if not (d == nill) then
			if (d.name == item) then
				return d.count
			end
		end
	end
	return 0
end

function selectItem(item)
	for i = 1, 16, 1 do
		d = getItemDetail(i)
		if not (d == nill) then
			if (d.name == item) then
				select(i)
				return true
			end
		end
	end
	return false
end

function gotoNewPlace()
	print("gotoNewPlace")
	forward(5, true, true)
end

function placeDirt()
	print("placeDirt")
	selectItem("minecraft:dirt")
	down(1, true, true)
	placeDown(nill, true)
	up(1, true, true)
end

function placeTree()
	print("placeTree")
	if  not (selectItem("minecraft:sapling")) then
		return false
	end
	placeDown(nill, true)
	return true
end

function chopTree()
	print("chopTree")
	up(5, true, true)
	while not (detectDown()) do
		if (down()) then
			if detectDown() then
				down(4, true, true)
				digDown()
				return true
			else
				up()
			end
		end
		os.sleep(10)
	end
	down(5, true, true)
	digDown()
	return true
end

function craftFloor()
	print("craftFloor")
	if (selectItem("minecraft:sapling")) then
		dropDown()
	end
	if (selectItem("minecraft:planks")) then
		dropDown()
	end
	craft(2)
	suckDown()
	suckDown()
end

function expandPlatform(size)
	print("buildFloor")
	forward(size, true, true)
	down(1, true, true)
	left()
	selectItem("minecraft:planks")
	for i = 1, 4, 1 do
		for j = 1, size, 1 do
			placeDown()
			forward(1, true, true)
		end
		left()
		for j = 1, size, 1 do
			placeDown()
			forward(1, true, true)
		end
	end
	left()
	up(1, true, true)
	forward(size, true, true)
	left()
	left()
end

function chopRow(l)
	if (l == nill) then
		l = 1
	end
	for i = 1, l, 1 do
		digUp()
		digDown()
		forward(1, true, true)
	end
end

function chopLeaves()
	print("chopLeaves")
	up(3, true, true)
	forward(2, true, true)
	left()
	forward(2, true, true)
	left()
	for i = 1, 2, 1 do
		for j = 1, 2, 1 do
			chopRow(4)
			left()
			chopRow(1)
			left()
			chopRow(4)
			right()
			chopRow(1)
			right()
		end
		chopRow(4)
		if (i == 1) then
			down(3, true, true)
			right()
			right()
		end
	end
	right()
	forward(2, true, true)
	right()
	forward(2, true, true)
	right()
	right()
end

function suckRowDown(l)
	if (l == nill) then
		l = 1
	end
	for i = 1, l, 1 do
		suckDown()
		forward(1, true, true)
	end
end

function suckLeaves(size)
	print("suckLeaves")
	for i = 1, size, 1 do
		forward(i, true, true)
		left()
		for j = 1, 4, 1 do
			for k = 1, i, 1 do
				suckDown()
				forward(1, true, true)
			end
			left()
			for j = k, i, 1 do
				suckDown()
				forward(1, true, true)
			end
		end
		left()
		forward(i, true, true)
		left()
		left()
	end
end

function createBarrel()
	local selectedSlot = getSelectedSlot()
	local planks = getNumberOfItem("minecraft:planks")
	selectItem("minecraft:chest")
	placeUp(true)
	if (planks < 9) then
		for i = 1, 16, 1 do
			if not (getSlotItem(i) == "minecraft:log") then
				dropUp()
			end
		end
		craft()
	end
	planks = getNumberOfItem("minecraft:planks")
	dropUp(planks - 3)
	select(1)
	selectItem("minecraft:planks")
	moveItemToSlot("minecraft:planks", 1)
	moveItemToSlot("minecraft:planks", 2, 1)
	moveItemToSlot("minecraft:planks", 2, 1)
	craft()

	while (getNumberOfItem("minecraft:planks") < 6) do
		suckUp()
	end

	for i = 1, 16, 1 do
		turtle.select(i)
		if not (getSlotItem(i) == "minecraft:planks" or getSlotItem(i) == "minecraft:wooden_slab") then
			dropUp()
		end
	end



	while (suckUp()) do

	end

	digUp()

	select(selectedSlot)
end

function placeBarrel()
	forward(1, true, true)
	down(2, true, true)
	if (selectItem("exnihilo:barrel")) then
		return placeDown(true)
	end
	return false
end

function getSlotItem(s)
	local selectedSlot = getSelectedSlot()
	d = getItemDetail()
	select(selectedSlot)
	if (d == nill) then
		return ""
	end
	return d.name
end
